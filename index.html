<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mikafood Production - Stratégie</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{ --black:#0a0a0a; --violet:#6a0dad; --violet-soft:rgba(106,13,173,0.45); --text:#f4f4f4; }
*{box-sizing:border-box;margin:0;padding:0}
body{ font-family:'Inter',sans-serif; background:var(--black); color:var(--text); padding-bottom: 100px; overflow-x: hidden; }

section{padding:60px 7vw}
.modules {
  display: grid !important;
  grid-template-columns: repeat(3, 1fr) !important;
  gap: 25px;
  max-width: 1100px;
  margin: 0 auto;
}
.module-card {
  border: 2px solid var(--violet-soft);
  border-radius: 20px;
  padding: 20px;
  cursor: pointer;
  background: rgba(20,20,20,0.6);
  aspect-ratio: 1/1;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  transition: 0.3s;
}
.module-card:hover { border-color: var(--violet); transform: translateY(-5px); }
.module-card.selected { border-color: var(--violet); box-shadow: 0 0 30px var(--violet); background: rgba(106,13,173,0.1); }
.module-thumb { width: 100%; height: 60%; object-fit: cover; border-radius: 12px; margin-bottom: 15px; pointer-events: none;}
h3 { font-size: 1rem; margin-bottom: 8px; pointer-events: none;}
span { font-size: 0.8rem; color: #aaa; pointer-events: none;}

#modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.92);
  z-index: 9999; display: none; align-items: center; justify-content: center;
  backdrop-filter: blur(10px);
}
.modal-content {
  background: #050505; border: 1px solid var(--violet);
  width: 66vw; max-height: 85vh; border-radius: 24px;
  padding: 40px; position: relative; display: flex; flex-direction: column;
}
.choice-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 25px 0; }
.choice-item {
  background: #111; padding: 18px; border-radius: 15px; border: 1px solid #222;
  display: flex; align-items: center; cursor: pointer; transition: 0.2s;
}
.choice-item:hover { border-color: var(--violet); }
.choice-item input { width: 22px; height: 22px; margin-right: 15px; accent-color: var(--violet); }

.sticky-bar {
  position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
  background: rgba(0,0,0,0.8); border: 1px solid var(--violet);
  padding: 15px 30px; border-radius: 50px; display: flex; align-items: center; gap: 20px; z-index: 100;
}
button { background: var(--violet); color: white; border: none; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-weight: bold; }

@media(max-width:900px){
  .modules { grid-template-columns: 1fr 1fr !important; }
  .modal-content { width: 90vw; padding: 20px; }
  .choice-grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<section id="modules">
  <div class="modules" id="main-grid">
    </div>
</section>

<div id="modal-overlay" onclick="closeModal()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <h2 id="modal-title" style="color:var(--violet)"></h2>
    <p id="modal-desc" style="margin-top:10px; color:#ccc;"></p>
    <div class="choice-grid" id="modal-choices"></div>
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <span id="modal-goal" style="color:var(--violet); font-weight:bold;"></span>
        <button onclick="saveAndClose()">Enregistrer la sélection</button>
    </div>
  </div>
</div>

<div class="sticky-bar">
  <span><strong id="count" style="color:var(--violet)">0</strong> module(s) choisi(s)</span>
  <button onclick="document.getElementById('formulaire').scrollIntoView()">Finaliser</button>
</div>

<script>
const MODULES_DATA = {
  "module1": { "titre": "Clientèle & Fidélité", "label": "Acquisition & Rétention", "img": "assets/1Fidélitéxclusivité.png", "desc": "L'acquisition coûte 5x plus cher que la rétention. Transformez vos visiteurs en ambassadeurs actifs.", "goal": "Objectif : +10% de panier moyen", "subs": [
    ["m1s1", "Data-Capture", "Wi-Fi, QR, réservations."], ["m1s2", "Analyse Récence", "Réactiver les clients absents."], ["m1s3", "Segmentation RFM", "Ciblage Fréquence/Montant."], ["m1s4", "Automation", "Relances et anniversaires."]
  ]},
  "module2": { "titre": "Fluidité & Service", "label": "Vitesse & Organisation", "img": "assets/2FluiditéServiceVitesse.png", "desc": "Un service fluide réduit le stress des équipes et augmente naturellement la rotation des tables.", "goal": "Objectif : +10% de productivité", "subs": [
    ["m2s1", "Audit des Flux", "Analyse salle/cuisine pour supprimer les pas inutiles."], ["m2s2", "Organisation Espaces", "Aménagement optimisé de tous les volumes."], ["m2s3", "Standardisation", "Fiches réflexes et protocoles de service."], ["m2s4", "Gestion de la Casse", "Réduction des pertes et erreurs de commande."]
  ]},
  "module3": { "titre": "Expérience Client", "label": "Parcours & Immersion", "img": "assets/3ExpérienceParcoursClient.png", "desc": "On ne vend plus seulement un plat, on vend un moment. Chaque détail du parcours doit être soigné.", "goal": "Objectif : +0.5 sur vos notes Google", "subs": [
    ["m3s1", "Audit du Parcours", "Analyse de l'accueil jusqu'à l'encaissement."], ["m3s2", "Mise en scène", "Visuel de la table et gestuelle du service."], ["m3s3", "Gestion de l'Attente", "Transformer les temps morts en moments positifs."], ["m3s4", "Avis Instantanés", "Capter la satisfaction avant le départ."]
  ]},
  "module4": { "titre": "Rentabilité & Gestion", "label": "Contrôle des Marges", "img": "assets/4RentabilitéCroissance.png", "desc": "Reprenez le contrôle total sur vos marges sans sacrifier la qualité.", "goal": "Objectif : -5% de coût matière", "subs": [
    ["m4s1", "Fiches Techniques", "Calcul précis des ratios par recette."], ["m4s2", "Analyse des Écarts", "Identifier où part la marchandise perdue."], ["m4s3", "Audit Achats", "Négociation et mise en concurrence fournisseurs."], ["m4s4", "Suivi Flash", "Tableau de bord de rentabilité hebdomadaire."]
  ]},
  "module5": { "titre": "Carte Stratégique", "label": "Menu Engineering", "img": "assets/5CarteMenuStratégique.jpg", "desc": "Votre carte doit orienter le client vers vos plats les plus rentables.", "goal": "Objectif : +10% de marge brute", "subs": [
    ["m5s1", "Structure du Menu", "Identification des stars et suppression des poids morts."], ["m5s2", "Psychologie de Carte", "Mise en page pour attirer l'œil sur les bons plats."], ["m5s3", "Valorisation Produits", "Storytelling pour justifier vos prix."], ["m5s4", "Briefing Équipe", "Coaching pour pousser les plats clés."]
  ]},
  "module6": { "titre": "Réseau & Alliances", "label": "Partenariats Locaux", "img": "assets/6RéseauAlliances.jpg", "desc": "Allez chercher vos clients là où ils dorment et là où ils travaillent.", "goal": "Objectif : Flux régulier d'apporteur d'affaires", "subs": [
    ["m6s1", "Hôtels & Hébergements", "Devenir l'adresse recommandée du secteur."], ["m6s2", "Offres Entreprises", "Solutions pour capter la clientèle de bureau."], ["m6s3", "Synergie Commerçants", "Échanges de visibilité de proximité."], ["m6s4", "Action de Quartier", "Visibilité lors des événements locaux."]
  ]},
  "module7": { "titre": "Identité Sonore", "label": "Ambiance & Acoustique", "img": "assets/7SonoreIdentité.jpg", "desc": "Le son influence le confort des clients et l'énergie de vos équipes.", "goal": "Objectif : Confort acoustique optimal", "subs": [
    ["m7s1", "Audit Acoustique", "Analyse de l'écho et des bruits parasites."], ["m7s2", "Curation Musicale", "Playlists sur-mesure selon les moments du jour."], ["m7s3", "Gestion de l'Énergie", "Ajustement du volume et du zonage."], ["m7s4", "Signature Sonore", "Style musical unique et reconnaissable."]
  ]},
  "module8": { "titre": "Événements", "label": "Programmation & Vie", "img": "assets/8ÉvénementsProgrammation.jpg", "desc": "Faites de votre établissement un lieu de vie pour remplir vos heures creuses.", "goal": "Objectif : Hausse du ticket moyen groupe", "subs": [
    ["m8s1", "Conception de Soirées", "Planification de rendez-vous thématiques."], ["m8s2", "Privatisations", "Offres packagées pour anniversaires et séminaires."], ["m8s3", "Logistique Interne", "Gérer l'événement sans perturber le service."], ["m8s4", "Stratégie Remplissage", "Communication ciblée pour vos temps forts."]
  ]},
  "module9": { "titre": "Rayonnement Digital", "label": "Visibilité & Avis", "img": "assets/9DigitalRayonnement.jpg", "desc": "Devenez l'adresse numéro 1 sur les recherches locales.", "goal": "Objectif : Domination des recherches locales", "subs": [
    ["m9s1", "Mise en valeur Vitrine", "Shooting photo et style visuel attractif."], ["m9s2", "Maîtrise Réputation", "Booster les avis et répondre stratégiquement."], ["m9s3", "Domination Google", "Optimisation technique pour Maps."], ["m9s4", "Ciblage Proximité", "Publicité ultra-locale (rayon 2km)."]
  ]}
};

const grid = document.getElementById('main-grid');
let currentModuleId = null;

// Génération des cartes
Object.keys(MODULES_DATA).forEach(id => {
  const m = MODULES_DATA[id];
  grid.innerHTML += `
    <div class="module-card" id="${id}" onclick="openModule('${id}')">
      <img src="${m.img}" class="module-thumb">
      <h3>${m.titre}</h3>
      <span>${m.label}</span>
    </div>`;
});

function openModule(id) {
  currentModuleId = id;
  const data = MODULES_DATA[id];
  document.getElementById('modal-title').textContent = data.titre;
  document.getElementById('modal-desc').textContent = data.desc;
  document.getElementById('modal-goal').textContent = data.goal;
  
  const choicesCont = document.getElementById('modal-choices');
  choicesCont.innerHTML = data.subs.map(s => `
    <label class="choice-item">
      <input type="checkbox" class="sub-check" data-subid="${s[0]}">
      <div><strong>${s[1]}</strong><br><small style="color:#777">${s[2]}</small></div>
    </label>`).join('');
  document.getElementById('modal-overlay').style.display = 'flex';
}

function closeModal() { document.getElementById('modal-overlay').style.display = 'none'; }

function saveAndClose() {
  const checks = document.querySelectorAll('.sub-check');
  let selected = false;
  checks.forEach(c => { if(c.checked) selected = true; });
  document.getElementById(currentModuleId).classList.toggle('selected', selected);
  updateCount();
  closeModal();
}

function updateCount() {
  document.getElementById('count').textContent = document.querySelectorAll('.module-card.selected').length;
}
</script>
</body>
</html>
